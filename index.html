<!DOCTYPE html>
<html>
<head>
  <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
  <link rel="icon" href="favicon.png" type="image/x-icon" />
  <link rel="stylesheet" href="https://use.typekit.net/yxo8mpe.css">
  <link rel="stylesheet" href="css/index.css">

  <title> Roots Network - Strengthen your connection to the infinite information on the internet </title>
</head>

<body>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/dragula/$VERSION/dragula.min.js'></script>
  <div id="app">
      <h1> Roots Network </h1>
        <select id="categoryDropdown" name="category">
          <option v-for="item in categoryList" v-bind:selectedCategory="item" value="item">{{item}}</option>
        </select>
        <input type="text" v-model="newlinkname" placeholder="name">
        <input type="url" pattern="https?://.+" v-model="newlinkurl" placeholder="url">
        <button v-on:click="addLink()">add</button>
  <ul>
    <h3>favorites</h3>
    <li v-for="link in favorites">
      <a v-bind:href=link.hyperlink target=_blank rel="noopener noreferrer">
      {{link.text}} </a>
            <button class="remove-button" v-on:click="removeLink(link)">x</button>
      </li>

    </ul>

    <ul>
      <h3>media firms</h3>
      <li v-for="link in mediafirms">
        <a v-bind:href=link.hyperlink target=_blank rel="noopener noreferrer">
        {{link.text}}</a>
        </li>
      </ul>
    </div>

  <script type="text/javascript">
var app = new Vue({
  el: '#app',
  data: {
    newlinkname: '',
    newlinkurl: '',
    selectedCategory: '',
    categoryList: ['favorites', 'mediafirms'],
    favorites: [
      { text: 'Material Design Dev Tutorials', hyperlink: 'https://material.io/collections/developer-tutorials/' },
      { text: 'HackerNews', hyperlink: 'https://news.ycombinator.com/' },
      { text: 'Zenhabits', hyperlink: 'https://zenhabits.net' },
      { text: 'How to Get Rich by Naval Ravikant', hyperlink: 'https://twitter.com/naval/status/1002103360646823936' },
      { text: 'How to Be Successful by Sam Altman', hyperlink: 'http://blog.samaltman.com/how-to-be-successful' },
      { text: 'Design in Tech Report 2019', hyperlink: 'https://designintech.report/2019/03/09/design-in-tech-report-2019/' },
      { text: '1000 True Fans', hyperlink: 'https://kk.org/thetechnium/1000-true-fans/' },
      { text: 'Typewolf Adobe Fonts', hyperlink: 'https://www.typewolf.com/adobe-fonts' },
      { text: 'Morning Rituals by Tim Ferriss ', hyperlink: 'https://fhww.files.wordpress.com/2018/09/tim-ferriss-5-morning-rituals.pdf' },
      { text: 'CSSTricks ', hyperlink: 'https://css-tricks.com' },
      { text: 'Google 2004 Founder Letter', hyperlink: 'https://abc.xyz/investor/founders-letters/2004-ipo-letter/' }
    ],
    mediafirms: [
      { text: 'Pentagram', hyperlink: 'http://www.pentagram.com/work/#/all/all/newest/' },
      { text: 'Sagmeister & Walsh', hyperlink: 'https://sagmeisterwalsh.com/work/' },
      { text: 'Harvard Meta Lab', hyperlink: 'https://metalabharvard.github.io/' },
      { text: 'MIT Media Lab', hyperlink: 'https://www.media.mit.edu/research/?filter=projects' }
    ]
  },
  // if there is already localstorage
  mounted () {
    if (localStorage.favorites) {
      console.log('favorites exists in localstorage', localStorage.favorites)
      this.favorites = JSON.parse(localStorage.getItem('favorites'))
    }
  },
  // if there is a change in favorites
  watch: {
    favorites (newBookmark) {
      console.log('favorites updated. Newbookmark is:', newBookmark)
      localStorage.setItem('favorites', JSON.stringify(newBookmark))
    }
  },
  methods: {
    addLink: function (test) {
      let dropdown = document.getElementById('categoryDropdown')
      let selectedCategory = dropdown.options[dropdown.selectedIndex].getAttribute('selectedCategory')

      if (selectedCategory === 'favorites') {
        app.favorites.push({ text: app.newlinkname, hyperlink: app.newlinkurl, category: 'Top Links' })
      } else {
        app.mediafirms.push({ text: app.newlinkname, hyperlink: app.newlinkurl, category: 'Top Links' })
      }
    },
    removeLink: function (link) {
      let linkLocation = app.favorites.indexOf(link)
      if (linkLocation !== -1) {
        app.favorites.splice(linkLocation, 1)
      }
    }
  }
})
</script>
</body>
</html>
